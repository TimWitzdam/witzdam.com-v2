---
import Layout from "../layouts/Layout.astro";
import Link from "../components/Link.astro";
import ProjectCard from "../components/ProjectCard.astro";
import Card from "../components/Card.astro";
import HoverTech from "../components/HoverTech.astro";
import MailIcon from "../../public/icons/mail.svg?raw";
---

<script>
  import gsap from "gsap";

  const particles = document.querySelectorAll(".particle");

  const toOptions = {
    duration: 0.6,
    ease: "power4.out",
  };

  particles.forEach((particle) => {
    if (particle instanceof HTMLElement) {
      const xTo = gsap.quickTo(particle, "x", toOptions);
      const yTo = gsap.quickTo(particle, "y", toOptions);

      const offset = Number(particle.dataset.offset);

      document.addEventListener("mousemove", (e) => {
        const { clientX, clientY } = e;
        const { height, width, left, top } = particle.getBoundingClientRect();
        const x = clientX - (left + width / 2);
        const y = clientY - (top + height / 2);
        xTo(x * (offset - 0.001));
        yTo(y * (offset - 0.001));
      });

      const startOpacity = Number(particle.dataset.startOpacity);

      document.addEventListener("scroll", (e) => {
        particle.style.opacity = (
          startOpacity -
          window.scrollY / 500
        ).toString();
      });
    }
  });
</script>

<Layout>
  <section
    class="mt-20 md:flex md:items-center md:justify-between max-w-4xl mx-auto px-6"
  >
    <div class="text-center mb-16 md:text-left md:w-fit">
      <h1 class="text-5xl font-bold mb-4">üëã Hey I'm Tim</h1>
      <p class="">
        I'm Tim Witzdam, a full time student from Germany <br />who also loves
        building cool things using code.
      </p>
      <div
        class="flex justify-center items-center gap-4 mt-4 md:justify-start md:w-fit"
      >
        <Link text="Email me" href="mailto:contact@witzdam.com" />
        <Link text="Useful tools" href="/tools" />
      </div>
    </div>
    <div class="grid place-items-center relative w-fit mx-auto h-[300px]">
      <img
        src="/images/pfp.png"
        alt="Tim Witzdam"
        class="rounded-full w-40 h-40 mt-8 object-contain"
      />
      <div class="hidden min-[400px]:block -z-10">
        <div
          class="particle rounded-lg bg-[#D9D9D9] w-12 h-12 absolute -bottom-4 left-4 -rotate-6 scale-100 opacity-[53%]"
          data-offset="0.0257"
          data-start-opacity="0.53"
        >
        </div>
        <div
          class="particle rounded-lg bg-[#D9D9D9] w-12 h-12 absolute -bottom-4 -right-2 rotate-[20deg] scale-50 opacity-[17%]"
          data-offset="0.060"
          data-start-opacity="0.17"
        >
        </div>
        <div
          class="particle rounded-lg bg-[#D9D9D9] w-12 h-12 absolute bottom-20 -right-20 rotate-[20deg] scale-75 opacity-[27%]"
          data-offset="0.044"
          data-start-opacity="0.27"
        >
        </div>
        <div
          class="particle rounded-lg bg-[#D9D9D9] w-12 h-12 absolute top-10 -right-28 rotate-[-8deg] scale-100 opacity-[37%]"
          data-offset="0.0238"
          data-start-opacity="0.37"
        >
        </div>
        <div
          class="particle rounded-lg bg-[#D9D9D9] w-12 h-12 absolute top-0 right-0 rotate-[14deg] scale-[30%] opacity-[71%]"
          data-offset="0.042"
          data-start-opacity="0.71"
        >
        </div>
        <div
          class="particle rounded-lg bg-[#D9D9D9] w-12 h-12 absolute top-0 -left-14 rotate-[-10deg] scale-[55%] opacity-[27%]"
          data-offset="0.055"
          data-start-opacity="0.27"
        >
        </div>
        <div
          class="particle rounded-lg bg-[#D9D9D9] w-12 h-12 absolute top-32 -left-20 rotate-[-40deg] scale-75 opacity-[53%]"
          data-offset="0.021"
          data-start-opacity="0.53"
        >
        </div>
      </div>
    </div>
  </section>
  <section class="mt-28 max-w-4xl mx-auto px-6">
    <h1 class="text-4xl font-bold">ü§ù My projects</h1>
    <p class="mb-12 mt-2 text-[#A2A2A2]">
      are helping exactly <b>85.654.743</b> people
    </p>
    <ProjectCard
      number="01"
      name="CryptoDisplay"
      description="Discord Bot that displays crypto prices for over 5 million users"
      image={{
        src: "/images/cryptodisplay.png",
        alt: "CryptoDisplay Website Screenshot",
      }}
      website_url="https://cryptodisplay.net"
      case_study_url="/projects/cryptodisplay"
    />
  </section>
  <section
    class="mt-28 max-w-4xl mx-auto px-6 grid grid-cols-1 grid-rows-1 gap-8 root-container"
  >
    <div class="T">
      <div class="L">
        <Card>
          <img
            src="/images/location.webp"
            alt="Location Map"
            class="rounded-[3rem] mb-6"
          />
          <p class="font-bold text-2xl text-center">Bottrop, Germany</p>
          <p class="opacity-60 text-center">21:29:45</p>
        </Card>
        <Card>
          <div class="flex items-center gap-6">
            <img
              src="/images/music.webp"
              alt="Head & Heart by Joel Corry"
              class="rounded-xl"
              width="60"
            />
            <div>
              <p class="font-bold text-xl">Head & Heart</p>
              <p class="opacity-60">Joel Corry and MNEK</p>
            </div>
          </div>
        </Card>
        <Card>
          <div class="flex items-center gap-6">
            <img
              src="/images/tech/github.svg"
              alt="GitHub Logo"
              class="rounded-xl"
              width="60"
            />
            <div>
              <p class="font-bold text-xl">Github</p>
            </div>
          </div>
        </Card>
      </div>
      <Card>
        <p class="font-bold text-2xl text-center mb-10">Tech I love</p>
        <div class="relative h-[600px] w-full">
          <div class="absolute top-0 left-0">
            <HoverTech
              size="70"
              name="Python"
              image={{ src: "/images/tech/python.svg", alt: "Python 3 Logo" }}
            />
          </div>
          <div class="absolute top-0 right-4">
            <HoverTech
              size="40"
              name="JavaScript"
              image={{
                src: "/images/tech/javascript.svg",
                alt: "Javascript Logo",
              }}
            />
          </div>
        </div>
      </Card>
    </div>
    <div class="B">
      <Card>
        <p class="font-bold text-xl text-center mb-4">CodePen</p>
        <img
          src="/images/tech/codepen.svg"
          alt="CodePen Logo"
          width="90"
          class="mx-auto"
        />
      </Card>
      <Card>
        <div class="flex justify-between">
          <div>
            <p class="font-bold text-3xl mb-1">Reach out to me!</p>
            <a
              href="mailto:tim@witzdam.com"
              class="opacity-60 flex items-center gap-2"
            >
              <span>tim@witzdam.com</span>
              <Fragment set:html={MailIcon} />
            </a>
          </div>
          <img
            src="/images/waving.webp"
            alt="Waving Emoji"
            width="120"
            class="my-4"
          />
        </div>
      </Card>
    </div>
  </section>
</Layout>

<style>
  .root-container {
    display: grid;
    grid-auto-columns: 1fr;
    grid-auto-rows: 1fr;
    grid-template-columns: 1fr;
    grid-template-rows: 1.6fr 0.4fr;
    gap: 2em 2em;
    grid-template-areas:
      "T"
      "B";
  }
  .T {
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    grid-template-rows: 1fr;
    gap: 2em 2em;
    grid-template-areas: "L .";
    grid-area: T;
  }
  .L {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 0.3fr 0.1fr 0.1fr;
    gap: 2em 2em;
    grid-template-areas:
      "."
      "."
      ".";
    grid-area: L;
  }
  .B {
    display: grid;
    grid-template-columns: 0.5fr 1.5fr;
    grid-template-rows: 1fr;
    gap: 2em 2em;
    grid-template-areas: ". .";
    grid-area: B;
  }
</style>
